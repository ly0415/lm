<form id="distributor">
    {if $lang_id ==1}
    <div class="height">
        <div class="new-table-responsive">
            <div class="box-body table-responsive no-padding ">
                <div class="box-header">
                    <div class="form-inline col-sm-10 col-md-11 no-padding">
                        <div class="form-group">
                            <label class="col-sm-4 col-md-2  col-lg-2 control-label"><span class="text-red">*</span>Distributor：</label>
                            <div class="col-sm-2">
                                <!--<select class="form-control j_select"  name="pidpid3"  onchange="getchids(this)" id="pid1">-->
                                <select class="form-control j_select" id="fx_level_1">
                                    <option value="0">please select lv.1 member</option>
                                    {foreach from=$level1 item=item}
                                    <option value="{$item.id}">{$item.real_name}</option>
                                    {/foreach}
                                </select>
                                <select class="form-control j_select" id="fx_level_2">
                                    <option value="0">please select lv.2 member</option>
                                </select>
                                <select class="form-control j_select"  name="fx_level_3"  id="fx_level_3">
                                    <option value="0">please select lv.3 member</option>
                                </select>
                                <input type="hidden" name="order_id" value="{$orderId}">
                                <input type="hidden" name="action" value="{$action}">
                                <input type="hidden" name="application" value="{$application}">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {else}
    <div class="height">
        <div class="new-table-responsive">
            <div class="box-body table-responsive no-padding ">
                <div class="box-header">
                    <div class="form-inline col-sm-10 col-md-11 no-padding">
                        <label class="col-sm-4 col-md-2  col-lg-2 control-label" style="height: 34px;line-height: 34px;"><span class="text-red">*</span>国家区域：</label>
                        <div class="col-sm-8">
                            <select class="form-control j_select" id="cate_1" onchange="getCateld(this, 2)">
                                <option value="0" >请选择国家</option>
                                {foreach from = $countrys item=v}
                                <option value="{$v.id}">{$v.cate_name}</option>
                                {/foreach}
                            </select>
                            <select class="form-control j_select" name="cate_2"  id="cate_2" onchange="getCateld(this, 1)">
                                <option value="0">请选择区域</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="new-table-responsive">
            <div class="box-body table-responsive no-padding ">
                <div class="box-header">
                    <div class="form-inline col-sm-10 col-md-11 no-padding">
                        <label class="col-sm-4 col-md-2  col-lg-2 control-label" style="height: 34px;line-height: 34px;"><span class="text-red">*</span>分销人员：</label>
                        <div class="col-sm-8">
                            <!--<select class="form-control j_select"  name="pidpid3"  onchange="getchids(this)" id="pid1">-->
                            <select class="form-control j_select" id="fx_level_1" onchange="getChild(this, 2)">
                                <option value="0">请选择一级分销人员</option>
                            </select>
                            <select class="form-control j_select" id="fx_level_2" onchange="getChild(this, 3)">
                                <option value="0">请选择二级分销人员</option>
                            </select>
                            <select class="form-control j_select"  name="fx_level_3"  id="fx_level_3">
                                <option value="0">请选择三级分销人员</option>
                            </select>
                            <input type="hidden" name="order_id" value="{$orderId}">
                            <input type="hidden" name="action" value="{$action}">
                            <input type="hidden" name="application" value="{$application}">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {/if}
</form>
{literal}
<script  type="text/javascript" >
    function  getCateld(obj, level) {
        var parent_id = parseInt(obj.value);
        if (level == 1) {
            var html = '<option value="0">请选择一级分销人员</option>';
            var html2 = '<option value="0">请选择二级分销人员</option>';
            var html3 = '<option value="0">请选择三级分销人员</option>';
            var id = 'fx_level_1';
            var id2 = 'fx_level_2';
            var id3 = 'fx_level_3';
            if (parent_id == 0) {
                $('#' + id).html(html);
                $('#' + id2).html(html2);
                $('#' + id3).html(html3);
            } else {
                var parent_id = 0;
                var store_id = $('select[name="cate_2"]').val();
                var url = 'store.php?app=orderList&act=ajaxGetChild&parent_id=' + parent_id;
                $.get(url, function (res) {
                    console.log(res)
                    $.each(res, function (key, value) {
                        html += '<option value="' + value.id + '">' + value.real_name + '</option>';
                    });
                    $('#' + id).html(html);
                    $('#' + id2).html(html2);
                    $('#' + id3).html(html3);
                }, 'json');
            }
        }
        if (level == 2) {
            var html = '<option value="0">请选择区域</option>';
            var id = 'cate_2';
            var html1 = '<option value="0">请选择一级分销人员</option>';
            var html2 = '<option value="0">请选择二级分销人员</option>';
            var html3 = '<option value="0">请选择三级分销人员</option>';
            var id1 = 'fx_level_1';
            var id2 = 'fx_level_2';
            var id3 = 'fx_level_3';
            if (parent_id == 0) {
                $('#' + id).html(html);
                $('#' + id1).html(html1);
                $('#' + id2).html(html2);
                $('#' + id3).html(html3);
            } else {
                var url = 'store.php?app=orderList&act=ajaxCateld&parent_id=' + parent_id;
                $.get(url, function (res) {
                    console.log(res)
                    $.each(res, function (key, value) {
                        html += '<option value="' + value.id + '">' + value.store_name + '</option>';
                    });
                    $('#' + id).html(html);
                    $('#' + id1).html(html1);
                    $('#' + id2).html(html2);
                    $('#' + id3).html(html3);
                }, 'json');
            }
        }
    }
</script>
<script  type="text/javascript" >
    function  getChild(obj, level) {
        var parent_id = parseInt(obj.value);
        var store_id = $('select[name="cate_2"]').val();
        if (store_id == 0) {
        } else {
            if (level == 2) {
                var html = '<option value="0">请选择二级分销人员</option>';
                var html3 = '<option value="0">请选择三级分销人员</option>';
                var id = 'fx_level_2';
                var id3 = 'fx_level_3';
            }
            if (level == 3) {
                var html = '<option value="0">请选择三级分销人员</option>';
                var id = 'fx_level_3';
            }
            if (parent_id == 0) {
                $('#' + id).html(html);
                $('#' + id3).html(html3);
            } else {
                var url = 'store.php?app=orderList&act=ajaxGetChild&parent_id=' + parent_id;
                $.get(url, function (res) {
                    console.log(res)
                    $.each(res, function (key, value) {
                        html += '<option value="' + value.id + '">' + value.real_name + '</option>';
                    });
                    $('#' + id).html(html);
                }, 'json');
            }
        }
    }
</script>
{/literal}


