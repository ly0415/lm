{if $is_ajax==0}
<div class="height" id="content1">
{/if}
    {if $is_ajax!=1}
    <div class="new-table-responsive">
        <div class="box-body table-responsive no-padding ">
            <div class="box-header">
                <form class="form-inline col-sm-10 col-md-11 no-padding" id="searchDialogForm">
                    <input type="hidden" name="totalpage" value="{$totalpage}" >
                    <div class="form-group form-group-sm form-mar">
                        <input type="text" class="form-control" name="param" value="{$param}" placeholder="昵称或手机号">
                    </div>

                    <div class="form-group form-group-sm form-mar">
                        <button type="button" class="btn btn-default btn-sm" onclick="search1();">
                            搜索 <i class="fa fa-search"></i>
                        </button>
                    </div>
                </form>
                <script type="text/javascript">
                    function search1() {
                        var url = '?app=ajaxSearch&act=userDialog&is_ajax=2';
                        var form = $('#searchDialogForm').serializeArray();
                        $.get(url,form, function (res) {
                            $('#content1').html(res);
                        });
                    }
                </script>
            </div>
            {/if}
            <table class="table table-hover tc-box" id="content2">
                <thead>
                <tr>
                    <th>用户昵称</th>
                    <th>手机号码</th>
                    <th>操作</th>
                </tr>
                </thead>
                <tbody>
                {foreach from=$list item=val}
                <tr>
                    <td>{$val.username}</td>
                    <td>{$val.phone}</td>
                    <td>
                        <a href="javascript:void(0);" class="btn btn-primary btn-sm checkuser" onclick="closeDialog();" data-id="{$val.id}" data-name="{$val.username}" data-phone="{$val.phone}">选 择</a>
                    </td>
                </tr>
                {/foreach}
                </tbody>
            </table>
            {if $is_ajax!=1}
            <div class="page-box">
                <ul id="page" class="pagination">
                </ul>
            </div>
        </div>
    </div>
    {/if}
{if $is_ajax==0}
</div>
{/if}
{if $is_ajax!=1}
{literal}
<script type="text/javascript">
    /*分页*/
    $(function () {
        var is_firsttime = true;
        var totalpage = $('input[name="totalpage"]').val();
        totalpage = parseInt(totalpage);
        $('#page').jqPaginator({
            totalPages: totalpage,
            visiblePages: 7,
            currentPage: 1,
            first: '<li class="prev"><a href="javascript:;">首页</a></li>',
            prev: '<li class="prev"><a href="javascript:;">上一页</a></li>',
            next: '<li class="next"><a href="javascript:;">下一页</a></li>',
            page: '<li class="page"><a href="javascript:;">{{page}}</a></li>',
            last: '<li class="prev"><a href="javascript:;">尾页</a></li>',
            onPageChange: function (num, type) {
                if (is_firsttime) {
                    is_firsttime = false;
                } else {
                    var url = '?app=ajaxSearch&act=userDialog&is_ajax=1&p=' + num;
                    var form = $('#searchDialogForm').serializeArray();
                    $.get(url,form, function (res) {
                        $('#content2').html(res);
                    });
                }
            }
        });
    });
</script>
{/literal}
{/if}