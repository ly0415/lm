<!DOCTYPE html>
<html>
    <head>
        {include file="public/header.html"}
    </head>
    <body class="hold-transition skin-blue sidebar-mini">
        <div class="wrapper">
            {include file="public/title.html"}
            <!-- Left side column. contains the logo and sidebar -->
            {include file="public/menu.html"}
            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                <!-- Content Header (Page header) -->
                <section class="content-header">
                    <h1>
                        &nbsp;&nbsp;&nbsp;{$language1->balance_statistics}
                    </h1>
                    <ol class="breadcrumb">
                        <li><a href="admin.php?app=default&act=index"><i class="fa fa-dashboard"></i> {$language1->statistics_manage}</a></li>
                        <li class="active">{$language1->statistics_manage}</li>
                        <li class="active">{$language1->balance_statistics}</li>
                    </ol>

                </section>

                <section class="content">
                    <!-- /.row -->
                    <div class="row">
                        <div class="col-xs-12">
                            <div class="box box-primary indexbox1">
                              <div class="form-inline">
                                <div class="form-group form-group-sm form-mar">
                                    <small class="control-label">{$language1->area_countroy}：</small>
                                    <select class="form-control w160 j_select j-area">
                                        <option value="0">{$language2->all}</option>
                                        {$areaOption}
                                    </select>
                                    <input type="hidden" class="j-area-v" value="{$area_id}">
                                </div>
                                <div class="form-group form-group-sm form-mar">
                                    <small class="control-label">{$language2->regional_store}：</small>
                                    <select class="form-control w160 j_select j-store">
                                        <option value="0">{$language2->all}</option>
                                        {$storeOption}
                                    </select>
                                    <input type="hidden" class="j-store-v" value="{$store_id}">
                                </div>
                                <div class="form-group form-group-sm form-mar">
                                      <small class="control-label">{$language1->select_year}：</small>
                                      <input type="text" class="form-control" id="datepicker11" name="start_time" value="{$start_time}" readonly="readonly">
                                </div>    
                            </div>
<!--                                <div class="tabs clearfix mt30">
                                    <h3 class="pull-left left" style="margin-top: 0;">基本统计</h3>
                                    <div class="pull-right right">
                                        <span {if !$setting}class="active"{/if} cla="day">本月</span>
                                        <span cla="days">近3个月</span>
                                        <span cla="month">近半年</span>
                                        <span cla="year">近一年</span>
                                    </div>
                                </div>-->

                                <div class="item mt30">
                                    <!--<h3 class="mt30">订单信息：</h3>-->
                                    <div class="col-md-offset-1 clearfix">
                                        <div class="col-md-5">
                                            <i class="ico-1 ic"></i><span class="show-1">{$language1->total_recharge_balance}：{$baseD.repaidBalance} {$language2->yuan}</span>
                                        </div>
                                        <div class="col-md-2">
                                        </div>
                                        <div class="col-md-5">
                                            <i class="ico-1 ic"></i><span class="show-2">{$language1->total_consume_balance}：{$baseD.consumptionBalance} {$language2->yuan}</span>
                                        </div>
                                        <div class="col-md-5 mt30">
                                            <i class="ico-1 ic"></i><span class="show-3">{$language1->after_consume_balance}：{$baseD.new_money} {$language2->yuan}</span>
                                        </div>
                                    </div>
                                </div>


                                <div class="new-table-responsive">
                                    <div class="box-body table-responsive no-padding">
                                        <div class="col-xs-12 "><br><br>
                                            <h3 style="margin-top: 0;"></h3>
                                            <!-- 为 ECharts 准备一个具备大小（宽高）的 DOM -->
                                            <div id="main3" style="width: 1000px;height:400px;"></div>
                                        </div>
                                    </div>
                                </div>

                                <!-- /.box-body -->
                            </div>
                        </div>
                    </div>
                </section>

                <!-- /.content -->
            </div>
            {include file="public/footer.html"}
        </div>
    </body>
</html>



<script>
                $('.j-area').change(function(){
                var area_id = $(this).val();
                var url = "admin.php?app=balanceStat&act=index&area_id="+area_id;
                location.href = url;
                 });
                $('.j-store').change(function(){
                var store_id = $(this).val();
                var area_id = $('.j-area-v').val();
                var url = "admin.php?app=balanceStat&act=index&area_id="+area_id+"&store_id="+store_id;
                location.href = url;
                });
                $('#datepicker11').change(function(){
                var startTime = $('#datepicker11').val();
                var area_id = $('.j-area-v').val();
                var store_id = $('.j-store-v').val();
                var url = "?app=balanceStat&act=index&start_time="+startTime+"&area_id=" + area_id + '&store_id=' + store_id;
                location.href = url;
                });
//    //基本统计
//    $('.tabs .right span').click(function() {
//
//        $('.tabs .right span').removeClass('active');
//        $(this).addClass('active');
//
//        var cla = $(this).attr('cla');
//        var url =  "?app=balanceStat&act=baseStat&opInfo=" + cla;
//        $.get(url,function(obj){
//            $('.show-1').html('充值余额总数：'+obj.repaidBalance+' 元');
//            $('.show-2').html(obj.time_mc + '充值余额：'+ obj.currentRecharge +' 元');
//            $('.show-3').html('消费余额总数：'+obj.consumptionBalance+' 元');
//            $('.show-4').html(obj.time_mc + '消费余额：'+obj.add_fxuser+' 元');
//        },'json');
//    });

    //会员统计
    var myChart3 = echarts.init(document.getElementById('main3'));
    // 指定图表的配置项和数据
    option3 = {
        color: ['#3398DB'],
        title : {
            text: '{$language1->balance_statistics}',
            subtext: '',
            x:'center'
        },
        tooltip : {
            trigger: 'axis',
            axisPointer : {            // 坐标轴指示器，坐标轴触发有效
                type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
            }
        },
        grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        },
        xAxis : [
            {
                type : 'category',
                data : [{$storeSting}],
                axisTick: {
                    alignWithLabel: true
                }
            }
        ],
        yAxis : [
            {
                type : 'value'
            }
        ],
         series : [
              {
                name:'{$language1->recharge_balance}',
                type:'bar',
                barWidth: '20%',
                itemStyle:{
                    normal:{
                        color:'#FF0000',
                    }
                },
                data:[{$store1}]
            },
             {
                name:'{$language1->consume_balance}',
                type:'bar',
                barWidth: '20%',
                itemStyle:{
                    normal:{
                        color:'#eee',
                    }
                },
                data:[{$store2}]
            },
            {
                name:'{$language1->after_consume}',
                type:'bar',
                barWidth: '20%',
                itemStyle:{
                    normal:{
                        color:'#3398DB',
                    }
                },
                data:[{$store3}]
            }
        ]
    };
    
    // 使用刚指定的配置项和数据显示图表。
    myChart3.setOption(option3);
        $('#datepicker11').datepicker({
                autoclose: true,
                format: 'yyyy',
                clearBtn: true,
                startView: 2,
                minViewMode: 2,
                maxViewMode: 2

            });

//            $('#datepicker22').datepicker({
//                autoclose: true,
//                format: 'yyyy-mm-dd',
//                clearBtn: true,
//                startView: 2,
//                minViewMode: 2,
//                maxViewMode: 2
//                
//            });

</script>

