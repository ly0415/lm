<!DOCTYPE html>
<html>
    <head lang="en">
        <meta charset="UTF-8">
        <title>{$langdata.add_edit_edit}</title>
        <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
        <meta content="yes" name="apple-mobile-web-app-capable">
        <meta content="black" name="apple-mobile-web-app-status-bar-style">
        <meta content="telephone=no" name="format-detection">
        <meta content="email=no" name="format-detection">
        <link href="{$STATIC_URL}/phone/css/mobiscroll.custom-2.17.1.min.css"  rel="stylesheet" type="text/css"/>
        <link href="{$STATIC_URL}/phone/css/style.css"  rel="stylesheet" type="text/css"/>
        <link rel="stylesheet" href="{$STATIC_URL}/plugin/bootstrapswitch/bootstrap-switch.min.css">
    </head>
    <body>
        <div class="addshipaddress-wrap">
            <div class="ss-nav">
                <a href="wx.php?app=userCenter&act=myAddress&storeid={$storeid}&lang={$lang}&auxiliary={$auxiliary}&latlon={$latlon}" class="ss-nav-back"></a>
                <div class="ss-nav-title">{$langdata.add_edit_edit}</div>
                <input type="hidden" name="returnUrl" value="{$returnUrl}" />
            </div>
            <div class="height90" style="height:0.9rem"></div>
            <div class="addshipaddress-list">
                <ul>
                    <li>
                        <input type="text" placeholder="{$langdata.add_edit_name}" name='name' value='{$info.name}'/>
                    </li>
                    <li>
                        <input type="text" placeholder="{$langdata.add_edit_phone}" name='phone' value='{$info.phone}'/>
                    </li>
                    <li class="clearfix">
                        {if $switch ==1}
                        <input  type="checkbox" name="switch_lan" id="switch" checked  value="1">
                        {else}
                        <input  type="checkbox" name="switch_lan" id="switch"  value="2">
                        {/if}
                    </li>
                    <div class="form-group" id="ch">
                        <li class="clearfix">
                            <select class="form-control w160 j_select" name="pro_id" id="pro_id" onchange="getcitylist(this.id)">
                                <option value="0">{$langdata.add_edit_province}</option>
                                {foreach from=$pros item=p}
                                <option value='{$p.id}' {if $ch_store_address[0] == $p.id} selected {/if}>{$p.name}</option>
                                {/foreach}
                            </select>
                            <i class="ico ico-right fr"></i>
                        </li> 
                        <li class="clearfix">
                            <select class="form-control w160 j_select" name="city_id" id="city_id" onchange="getarealist(this.id)">
                                <option value="0">{$langdata.add_edit_City}</option>
                                {foreach from=$ch_city item=vo}
                                <option value='{$vo.id}' {if $ch_store_address[1] == $vo.id} selected {/if}>{$vo.name}</option>
                                {/foreach}
                            </select>
                            <i class="ico ico-right fr"></i>
                        </li> 
                        <li class="clearfix">
                            <select class="form-control w160 j_select" name="area_id" id="area_id">
                                <option value="0">{$langdata.add_edit_region}</option>
                                {foreach from=$ch_area item=v}
                                <option value='{$v.id}' {if $ch_store_address[2] == $v.id} selected {/if}>{$v.name}</option>
                                {/foreach}
                            </select>
                            <i class="ico ico-right fr"></i>
                        </li> 
                    </div>
                    <div class="form-group mp100" id="en">
                        <li class="clearfix foregin">	
                            <select class="form-control w160 j_select" name="country_id" id="country_id" onchange="getZonelist(this.id)">
                                <option value="0">{$langdata.add_edit_Country}</option>
                                {foreach from=$countrys item=p}
                                <option value='{$p.country_id}' {if $en_store_address[0] == $p.country_id} selected {/if}>{$p.name}</option>
                                {/foreach}
                            </select>
                            <i class="ico ico-right fr"></i>
                        </li> 
                        <li class="clearfix foregin">
                            <select class="form-control w160 j_select" name="zhou_id" id="zhou_id">
                                <option value="0">{$langdata.add_edit_continent}</option>
                                {foreach from=$en_zhou item=v}
                                <option value='{$v.zone_id}' {if $en_store_address[1] == $v.zone_id} selected {/if}>{$v.name}</option>
                                {/foreach}
                            </select>
                            <i class="ico ico-right fr"></i>
                        </li>
                    </div>
                    <li>
                        <input type="text" placeholder="{$langdata.add_edit_company}" name='company' value='{$info.company_name}'/>
                    </li>

                    <li>
                        <input type="text" placeholder="{$langdata.add_edit_details}" name='address' value='{$info.address}'/>
                    </li>
                    <li>
                        <input type="text" placeholder="{$langdata.add_edit_office}" name='postal' value='{$info.postal_code}'/>
                    </li>

                </ul>
            </div>
            <div class="addshipaddress-save">
                <input type="button" class="submit addshipaddress-save" value="{$langdata.add_edit_Preservation}" style='cursor:pointer;outline:none;border:none;-webkit-appearance : none ;border-radius: 0;'/>
                <input type="hidden"  name="storeid"  value="{$storeid}" >
                <input type="hidden"  name="lang"  value="{$lang}" >
                <input type="hidden"  name="auxiliary"  value="{$auxiliary}" >
            </div>
            <div class="height80"></div>
        </div>   
        <script src="{$STATIC_URL}/phone/js/jquery-2.1.1.min.js" type="text/javascript"></script>
        <script src="{$STATIC_URL}/phone/js/common.js" type="text/javascript"></script>
        <script src="{$STATIC_URL}/phone/js/layer/layer.js" type="text/javascript"></script>
        <script src="{$STATIC_URL}/phone/js/mobiscroll.custom-2.17.1.min.js" type="text/javascript"></script>
        <script src="{$STATIC_URL}/phone/js/index.js" type="text/javascript"></script>
        <script src="{$STATIC_URL}/plugin/bootstrapswitch/bootstrap-switch.min.js"></script>
        {literal}
        <script type="text/javascript">
                                $(function () {
                                    $('.submit').click(function () {
                                        var name = $('input[name=name]').val();
                                        var phone = $('input[name=phone]').val();
                                        var switch_lan = $('input[name=switch_lan]').val();
                                        var pro_id = $('select[name=pro_id]').val();
                                        var city_id = $('select[name=city_id]').val();
                                        var area_id = $('select[name=area_id]').val();
                                        var country_id = $('select[name=country_id]').val();
                                        var zhou_id = $('select[name=zhou_id]').val();
                                        var company = $('input[name=company]').val();
                                        var address = $('input[name=address]').val();
                                        var postal = $('input[name=postal]').val();
                                        var storeid = $('input[name=storeid]').val();
                                        var lang = $('input[name=lang]').val();
                                        var auxiliary = $('input[name=auxiliary]').val();
                                        var returnUrl = $('input[name=returnUrl]').val();
                                        $.ajax({
                                            url: 'wx.php?app=userCenter&act=doAddress',
                                            type: 'post',
                                            data: {'returnUrl': returnUrl, 'name': name, 'phone': phone, 'switch_lan': switch_lan, 'pro_id': pro_id, 'city_id': city_id, 'area_id': area_id, 'country_id': country_id, 'zhou_id': zhou_id, 'company': company, 'address': address, 'postal': postal, 'storeid': storeid, 'lang': lang, 'auxiliary': auxiliary},
                                            async: false, //默认为true 异步
                                            success: function (res) {
                                                var jsondata = $.parseJSON(res);

                                                if (jsondata.status == '1') {
                                                    layer.open({
                                                        shade: false
                                                        , content: '<i class="ico ico-correct"></i>' + jsondata.message
                                                        , className: 'layer-tip'
                                                        , time: 2
                                                    });
                                                    setTimeout(function () {
                                                        window.location.href = jsondata.info.url;
                                                    }, 1000);
                                                } else {
                                                    layer.open({
                                                        shade: false
                                                        , content: '<i class="ico ico-error"></i>' + jsondata.message
                                                        , className: 'layer-tip'
                                                        , time: 2
                                                    });
                                                }

                                            }
                                        });
                                    })
                                })
        </script>
        {/literal}
        <script type="text/javascript">
            $('#pro_id').mobiscroll().select({
                theme: 'default', // Specify theme like: theme: 'ios' or omit setting to use default
                lang: 'zh', // Specify language like: lang: 'pl' or omit setting to use default
                display: 'modal',
                onSelect: function () {

                }

            });
            $('#city_id').mobiscroll().select({
                theme: 'default', // Specify theme like: theme: 'ios' or omit setting to use default
                lang: 'zh', // Specify language like: lang: 'pl' or omit setting to use default
                display: 'modal',
                onSelect: function () {

                }

            });
            $('#area_id').mobiscroll().select({
                theme: 'default', // Specify theme like: theme: 'ios' or omit setting to use default
                lang: 'zh', // Specify language like: lang: 'pl' or omit setting to use default
                display: 'modal',
                onSelect: function () {

                }

            });
            $('#country_id').mobiscroll().select({
                theme: 'default', // Specify theme like: theme: 'ios' or omit setting to use default
                lang: 'zh', // Specify language like: lang: 'pl' or omit setting to use default
                display: 'modal',
                onSelect: function () {

                }

            });
            $('#zhou_id').mobiscroll().select({
                theme: 'default', // Specify theme like: theme: 'ios' or omit setting to use default
                lang: 'zh', // Specify language like: lang: 'pl' or omit setting to use default
                display: 'modal',
                onSelect: function () {

                }

            });
        </script>
        {if $language=='ZH'}
        <!--        国际表-->
        <script type="text/javascript">
            function getZonelist(id) {
                var pro_id = $.trim($("#" + id).val());
                if (pro_id == 0) {
                    var html = "<option value='0'>请选择洲</option>";
                    $("#" + id).parent().next().find('select').html(html);
                    return;
                }
                $.ajax({
                    url: 'wx.php?app=userCenter&act=getZoneData',
                    type: 'POST',
                    data: "pro_id=" + pro_id,
                    dataType: "json",
                    success: function (msg) {
                        // console.log(msg);
                        // return false;
                        var html = "<option value=''>请选择洲</option>";
                        $("#zhou_id_dummy").val("请选择洲");
                        $.each(msg, function (key, value) {
                            html += "<option value='" + value.zone_id + "'>" + value.name + "</option>";
                        });
                        $("#" + id).parent().next().find('select').html(html);
                    }
                });
                return false;
            }
        </script>
        <!--        国内表-->
        <script type="text/javascript">
            function getcitylist(id) {
                var pro_id = $.trim($("#" + id).val());
                if (pro_id == 0) {
                    var html = "<option value='0'>请选择城市</option>";
                    $("#" + id).parent().next().find('select').html(html);
                    var city_id = $("#" + id).parent().next().find('select').val();
                    if (city_id == 0) {
                        var html = "<option value='0'>请选择区域</option>";
                        $("#" + id).parent().next().next().find('select').html(html);
                    }
                    return false;
                }
                $.ajax({
                    url: 'wx.php?app=userCenter&act=getAjaxData',
                    type: 'POST',
                    data: "pro_id=" + pro_id,
                    dataType: "json",
                    success: function (msg) {
                        var html = "<option value=''>请选择城市</option>";
                        $("#city_id_dummy").val("请选择城市");
                        $.each(msg, function (key, value) {
                            html += "<option value='" + value.id + "'>" + value.name + "</option>";
                        });
                        $("#" + id).parent().next().find('select').html(html);
                        var html_1 = "<option value='0'>请选择区域</option>";
                        $("#area_id_dummy").val("请选择区域");
                        $("#" + id).parent().next().next().find('select').html(html_1);
                    }
                });
                return false;
            }
            //获取当前区域列表
            function getarealist(id) {
                var city_id = $.trim($("#" + id).val());
                if (pro_id == 0) {
                    var html = "<option value='0'>请选择区域</option>";
                    $("#" + id).parent().next().find('select').html(html);
                    return false;
                }
                $.ajax({
                    url: 'wx.php?app=userCenter&act=getAjaxData',
                    type: 'POST',
                    data: "pro_id=" + city_id,
                    dataType: "json",
                    success: function (msg) {
                        var html = "<option value=''>请选择区域</option>";
                        $("#area_id_dummy").val("请选择区域");
                        $.each(msg, function (key, value) {
                            html += "<option value='" + value.id + "'>" + value.name + "</option>";
                        });
                        $("#" + id).parent().next().find('select').html(html);
                    }
                });
                return false;
            }
        </script>
        {if $switch ==1}
        <script type="text/javascript">
            $(function () {
                $('#en').css('display', 'none');
                $('#ch').css('display', 'block')
                $('#submit').click(function () {
                    if ($('input[name=]'))
                        layer.alert(1111);
                    return false;
                })
                $("[name='switch_lan']").bootstrapSwitch({
                    onText: "国内",
                    offText: "国际",
                    size: "small",
                    onSwitchChange: function (event, state) {
                        // 国内true 国外是false
                        if (state == true) {
                            $(this).val('1');
                            $('#en').css('display', 'none');
                            $('#ch').css('display', 'block');
                        } else {
                            $(this).val('2');
                            $('#en').css('display', 'block');
                            $('#ch').css('display', 'none');
                        }
                    }

                });
            });
        </script>
        {else}
        <script type="text/javascript">
            $(function () {
                $('#en').css('display', 'block');
                $('#ch').css('display', 'none')
                $('#submit').click(function () {
                    if ($('input[name=]'))
                        layer.alert(1111);
                    return false;
                })
                $("[name='switch_lan']").bootstrapSwitch({
                    onText: "国内",
                    offText: "国际",
                    size: "small",
                    onSwitchChange: function (event, state) {
                        // 国内true 国外是false
                        if (state == true) {
                            $(this).val('1');
                            $('#en').css('display', 'none');
                            $('#ch').css('display', 'block');
                        } else {
                            $(this).val('2');
                            $('#en').css('display', 'block');
                            $('#ch').css('display', 'none');
                        }
                    }

                });
            });
        </script>
        {/if}
        {else}
        <!--        国际表-->
        <script type="text/javascript">
            function getZonelist(id) {
                var pro_id = $.trim($("#" + id).val());
                if (pro_id == 0) {
                    var html = "<option value='0'>Please choose the continent</option>";
                    $("#" + id).parent().next().find('select').html(html);
                    return;
                }
                $.ajax({
                    url: 'wx.php?app=userCenter&act=getZoneData',
                    type: 'POST',
                    data: "pro_id=" + pro_id,
                    dataType: "json",
                    success: function (msg) {
                        // console.log(msg);
                        // return false;
                        var html = "<option value=''>Please choose the continent</option>";
                        $("#zhou_id_dummy").val("Please choose the continent");
                        $.each(msg, function (key, value) {
                            html += "<option value='" + value.zone_id + "'>" + value.name + "</option>";
                        });
                        $("#" + id).parent().next().find('select').html(html);
                    }
                });
                return false;
            }
        </script>
        <!--        国内表-->
        <script type="text/javascript">
            function getcitylist(id) {
                var pro_id = $.trim($("#" + id).val());
                if (pro_id == 0) {
                    var html = "<option value='0'>Please choose the city</option>";
                    $("#" + id).parent().next().find('select').html(html);
                    var city_id = $("#" + id).parent().next().find('select').val();
                    if (city_id == 0) {
                        var html = "<option value='0'>Please select the area</option>";
                        $("#" + id).parent().next().next().find('select').html(html);
                    }
                    return false;
                }
                $.ajax({
                    url: 'wx.php?app=userCenter&act=getAjaxData',
                    type: 'POST',
                    data: "pro_id=" + pro_id,
                    dataType: "json",
                    success: function (msg) {
                        var html = "<option value=''>Please choose the city</option>";
                        $("#city_id_dummy").val("Please choose the city");
                        $.each(msg, function (key, value) {
                            html += "<option value='" + value.id + "'>" + value.name + "</option>";
                        });
                        $("#" + id).parent().next().find('select').html(html);
                        var html_1 = "<option value='0'>Please select the area</option>";
                        $("#area_id_dummy").val("Please select the area");
                        $("#" + id).parent().next().next().find('select').html(html_1);
                    }
                });
                return false;
            }
            //获取当前区域列表
            function getarealist(id) {
                var city_id = $.trim($("#" + id).val());
                if (pro_id == 0) {
                    var html = "<option value='0'>Please select the area</option>";
                    $("#" + id).parent().next().find('select').html(html);
                    return false;
                }
                $.ajax({
                    url: 'wx.php?app=userCenter&act=getAjaxData',
                    type: 'POST',
                    data: "pro_id=" + city_id,
                    dataType: "json",
                    success: function (msg) {
                        var html = "<option value=''>Please select the area</option>";
                        $("#area_id_dummy").val("Please select the area");
                        $.each(msg, function (key, value) {
                            html += "<option value='" + value.id + "'>" + value.name + "</option>";
                        });
                        $("#" + id).parent().next().find('select').html(html);
                    }
                });
                return false;
            }
        </script>
        {if $switch ==1}
        <script type="text/javascript">
            $(function () {
                $('#en').css('display', 'none');
                $('#ch').css('display', 'block')
                $('#submit').click(function () {
                    if ($('input[name=]'))
                        layer.alert(1111);
                    return false;
                })
                $("[name='switch_lan']").bootstrapSwitch({
                    onText: "Domestic",
                    offText: "International",
                    size: "small",
                    onSwitchChange: function (event, state) {
                        // 国内true 国外是false
                        if (state == true) {
                            $(this).val('1');
                            $('#en').css('display', 'none');
                            $('#ch').css('display', 'block');
                        } else {
                            $(this).val('2');
                            $('#en').css('display', 'block');
                            $('#ch').css('display', 'none');
                        }
                    }

                });
            });
        </script>
        {else}
        <script type="text/javascript">
            $(function () {
                $('#en').css('display', 'block');
                $('#ch').css('display', 'none')
                $('#submit').click(function () {
                    if ($('input[name=]'))
                        layer.alert(1111);
                    return false;
                })
                $("[name='switch_lan']").bootstrapSwitch({
                    onText: "Domestic",
                    offText: "International",
                    size: "small",
                    onSwitchChange: function (event, state) {
                        // 国内true 国外是false
                        if (state == true) {
                            $(this).val('1');
                            $('#en').css('display', 'none');
                            $('#ch').css('display', 'block');
                        } else {
                            $(this).val('2');
                            $('#en').css('display', 'block');
                            $('#ch').css('display', 'none');
                        }
                    }

                });
            });
        </script>
        {/if}
        {/if}
    </body>
</html>